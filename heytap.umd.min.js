(function(Q,Y){typeof exports=="object"&&typeof module<"u"?module.exports=Y():typeof define=="function"&&define.amd?define(Y):(Q=typeof globalThis<"u"?globalThis:Q||self,Q.heytap=Y())})(this,function(){"use strict";const Q={navigator:{userAgent:""},location:{hostname:"",href:""}};function Y(){return typeof window<"u"?window:Object.assign({},Q)}const G=Y(),{HeytapNativeApi:Ke,location:q,navigator:Ve,ThemeClient:Je}=G,D=Ve.userAgent,Ge=/(phone|pod|ios|Android|Mobile)/i.test(D),Ze=/Android/i.test(D),Qe=/hardwareType\/pad/i.test(D)||/com.oplus.studycenter/i.test(D),Ye=/isJSBEncryptOff/.test(q.href),Xe=/WebFitMethod\/1/i.test(D),re=D.match(/HeytapJsApi\/(\S*)/),xe=D.match(/(appVersion|VersionCode)\/([\d]+)/),ne=D.match(/usercenter\/([A-Z]*)_?([\d.]+)/),me=/(iPhone|iPad|iPod)/.test(D)&&D.match(/OS ([\d_.]+) like Mac OS X/),Ce=me&&me[1].split("_").join("."),Be=re||Ke?{v:re&&re[1]||"0.9"}:null,ie=/cloud\//.test(D),ae=/findDevice\//.test(D),oe=/Business\/credit/.test(D)||!!G.duiba_app,se=/Business\/account/.test(D)||!!G.defaultIntf,ce=/ClientType\/theme/i.test(D),Ee=/Business\/vip/.test(D)||/ClientType\/VipSDK/.test(D)||!!Be&&!(oe||se||ie||ce||ae),be=!!Je;be&&(G.ThemeH5=G.ThemeH5||{});const et=!(q.href.indexOf("https://titan.heytap.com/pages/66311884741580800/index.html")===0)&&(oe||se||Ee||ie||ae||ce||Ce&&/IsExp\/(0|1)/.test(D)||!!G.__jsbMock__),tt=/(uc3|env3|jf3|test3|test03)/.test(q.hostname)?"test3":/(uc2|test2|test02)/.test(q.hostname)?"test2":/uctag/.test(q.hostname)?"tag":/(test|.myoas.net)/.test(q.hostname)?"test":/-dev/.test(q.hostname)?"dev":/^pre-?/.test(q.hostname)||/-pre/.test(q.hostname)?"pre":q.hostname==="localhost"||/^(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])$/.test(q.hostname)?"local":"prod",rt=ne&&{v:ne[2],code:xe&&xe[2],region:ne[1]||"CN"},I={ua:D,env:tt,maybeInApp:et,supportWebExt:Be,webFitMethod:Xe,ucAppInfo:rt,isAndroid:Ze,isMobile:Ge,isOPPOPad:Qe,isJSBEncryptOff:Ye,isIOS:Ce,isCreditWebview:oe,isAccountWebview:se,isVipWebview:Ee,isOcloudWebview:ie,isThemeWebview:be,isThemeNewWebview:ce,isFindWebview:ae};var j=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ee(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function nt(i){if(i.__esModule)return i;var c=i.default;if(typeof c=="function"){var t=function a(){return this instanceof a?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};t.prototype=c.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(i).forEach(function(a){var p=Object.getOwnPropertyDescriptor(i,a);Object.defineProperty(t,a,p.get?p:{enumerable:!0,get:function(){return i[a]}})}),t}var we={exports:{}};function it(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fe={exports:{}};const at=nt(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var Re;function L(){return Re||(Re=1,function(i,c){(function(t,a){i.exports=a()})(j,function(){var t=t||function(a,p){var x;if(typeof window<"u"&&window.crypto&&(x=window.crypto),typeof self<"u"&&self.crypto&&(x=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(x=globalThis.crypto),!x&&typeof window<"u"&&window.msCrypto&&(x=window.msCrypto),!x&&typeof j<"u"&&j.crypto&&(x=j.crypto),!x&&typeof it=="function")try{x=at}catch{}var W=function(){if(x){if(typeof x.getRandomValues=="function")try{return x.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof x.randomBytes=="function")try{return x.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},O=Object.create||function(){function n(){}return function(e){var s;return n.prototype=e,s=new n,n.prototype=null,s}}(),H={},o=H.lib={},w=o.Base=function(){return{extend:function(n){var e=O(this);return n&&e.mixIn(n),(!e.hasOwnProperty("init")||this.init===e.init)&&(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var e in n)n.hasOwnProperty(e)&&(this[e]=n[e]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),R=o.WordArray=w.extend({init:function(n,e){n=this.words=n||[],e!=p?this.sigBytes=e:this.sigBytes=n.length*4},toString:function(n){return(n||m).stringify(this)},concat:function(n){var e=this.words,s=n.words,_=this.sigBytes,B=n.sigBytes;if(this.clamp(),_%4)for(var A=0;A<B;A++){var z=s[A>>>2]>>>24-A%4*8&255;e[_+A>>>2]|=z<<24-(_+A)%4*8}else for(var M=0;M<B;M+=4)e[_+M>>>2]=s[M>>>2];return this.sigBytes+=B,this},clamp:function(){var n=this.words,e=this.sigBytes;n[e>>>2]&=4294967295<<32-e%4*8,n.length=a.ceil(e/4)},clone:function(){var n=w.clone.call(this);return n.words=this.words.slice(0),n},random:function(n){for(var e=[],s=0;s<n;s+=4)e.push(W());return new R.init(e,n)}}),g=H.enc={},m=g.Hex={stringify:function(n){for(var e=n.words,s=n.sigBytes,_=[],B=0;B<s;B++){var A=e[B>>>2]>>>24-B%4*8&255;_.push((A>>>4).toString(16)),_.push((A&15).toString(16))}return _.join("")},parse:function(n){for(var e=n.length,s=[],_=0;_<e;_+=2)s[_>>>3]|=parseInt(n.substr(_,2),16)<<24-_%8*4;return new R.init(s,e/2)}},T=g.Latin1={stringify:function(n){for(var e=n.words,s=n.sigBytes,_=[],B=0;B<s;B++){var A=e[B>>>2]>>>24-B%4*8&255;_.push(String.fromCharCode(A))}return _.join("")},parse:function(n){for(var e=n.length,s=[],_=0;_<e;_++)s[_>>>2]|=(n.charCodeAt(_)&255)<<24-_%4*8;return new R.init(s,e)}},C=g.Utf8={stringify:function(n){try{return decodeURIComponent(escape(T.stringify(n)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(n){return T.parse(unescape(encodeURIComponent(n)))}},E=o.BufferedBlockAlgorithm=w.extend({reset:function(){this._data=new R.init,this._nDataBytes=0},_append:function(n){typeof n=="string"&&(n=C.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes},_process:function(n){var e,s=this._data,_=s.words,B=s.sigBytes,A=this.blockSize,z=A*4,M=B/z;n?M=a.ceil(M):M=a.max((M|0)-this._minBufferSize,0);var r=M*A,f=a.min(r*4,B);if(r){for(var y=0;y<r;y+=A)this._doProcessBlock(_,y);e=_.splice(0,r),s.sigBytes-=f}return new R.init(e,f)},clone:function(){var n=w.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0});o.Hasher=E.extend({cfg:w.extend(),init:function(n){this.cfg=this.cfg.extend(n),this.reset()},reset:function(){E.reset.call(this),this._doReset()},update:function(n){return this._append(n),this._process(),this},finalize:function(n){n&&this._append(n);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(n){return function(e,s){return new n.init(s).finalize(e)}},_createHmacHelper:function(n){return function(e,s){return new $.HMAC.init(n,s).finalize(e)}}});var $=H.algo={};return H}(Math);return t})}(fe)),fe.exports}var ue={exports:{}},Te;function ot(){return Te||(Te=1,function(i,c){(function(t,a){i.exports=a(L())})(j,function(t){return function(){var a=t,p=a.lib,x=p.WordArray,W=a.enc;W.Base64={stringify:function(H){var o=H.words,w=H.sigBytes,R=this._map;H.clamp();for(var g=[],m=0;m<w;m+=3)for(var T=o[m>>>2]>>>24-m%4*8&255,C=o[m+1>>>2]>>>24-(m+1)%4*8&255,E=o[m+2>>>2]>>>24-(m+2)%4*8&255,$=T<<16|C<<8|E,n=0;n<4&&m+n*.75<w;n++)g.push(R.charAt($>>>6*(3-n)&63));var e=R.charAt(64);if(e)for(;g.length%4;)g.push(e);return g.join("")},parse:function(H){var o=H.length,w=this._map,R=this._reverseMap;if(!R){R=this._reverseMap=[];for(var g=0;g<w.length;g++)R[w.charCodeAt(g)]=g}var m=w.charAt(64);if(m){var T=H.indexOf(m);T!==-1&&(o=T)}return O(H,o,R)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function O(H,o,w){for(var R=[],g=0,m=0;m<o;m++)if(m%4){var T=w[H.charCodeAt(m-1)]<<m%4*2,C=w[H.charCodeAt(m)]>>>6-m%4*2,E=T|C;R[g>>>2]|=E<<24-g%4*8,g++}return x.create(R,g)}}(),t.enc.Base64})}(ue)),ue.exports}var de={exports:{}},Ae;function st(){return Ae||(Ae=1,function(i,c){(function(t,a){i.exports=a(L())})(j,function(t){return function(a){var p=t,x=p.lib,W=x.WordArray,O=x.Hasher,H=p.algo,o=[];(function(){for(var C=0;C<64;C++)o[C]=a.abs(a.sin(C+1))*4294967296|0})();var w=H.MD5=O.extend({_doReset:function(){this._hash=new W.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(C,E){for(var $=0;$<16;$++){var n=E+$,e=C[n];C[n]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var s=this._hash.words,_=C[E+0],B=C[E+1],A=C[E+2],z=C[E+3],M=C[E+4],r=C[E+5],f=C[E+6],y=C[E+7],d=C[E+8],S=C[E+9],P=C[E+10],k=C[E+11],F=C[E+12],K=C[E+13],V=C[E+14],J=C[E+15],u=s[0],l=s[1],v=s[2],h=s[3];u=R(u,l,v,h,_,7,o[0]),h=R(h,u,l,v,B,12,o[1]),v=R(v,h,u,l,A,17,o[2]),l=R(l,v,h,u,z,22,o[3]),u=R(u,l,v,h,M,7,o[4]),h=R(h,u,l,v,r,12,o[5]),v=R(v,h,u,l,f,17,o[6]),l=R(l,v,h,u,y,22,o[7]),u=R(u,l,v,h,d,7,o[8]),h=R(h,u,l,v,S,12,o[9]),v=R(v,h,u,l,P,17,o[10]),l=R(l,v,h,u,k,22,o[11]),u=R(u,l,v,h,F,7,o[12]),h=R(h,u,l,v,K,12,o[13]),v=R(v,h,u,l,V,17,o[14]),l=R(l,v,h,u,J,22,o[15]),u=g(u,l,v,h,B,5,o[16]),h=g(h,u,l,v,f,9,o[17]),v=g(v,h,u,l,k,14,o[18]),l=g(l,v,h,u,_,20,o[19]),u=g(u,l,v,h,r,5,o[20]),h=g(h,u,l,v,P,9,o[21]),v=g(v,h,u,l,J,14,o[22]),l=g(l,v,h,u,M,20,o[23]),u=g(u,l,v,h,S,5,o[24]),h=g(h,u,l,v,V,9,o[25]),v=g(v,h,u,l,z,14,o[26]),l=g(l,v,h,u,d,20,o[27]),u=g(u,l,v,h,K,5,o[28]),h=g(h,u,l,v,A,9,o[29]),v=g(v,h,u,l,y,14,o[30]),l=g(l,v,h,u,F,20,o[31]),u=m(u,l,v,h,r,4,o[32]),h=m(h,u,l,v,d,11,o[33]),v=m(v,h,u,l,k,16,o[34]),l=m(l,v,h,u,V,23,o[35]),u=m(u,l,v,h,B,4,o[36]),h=m(h,u,l,v,M,11,o[37]),v=m(v,h,u,l,y,16,o[38]),l=m(l,v,h,u,P,23,o[39]),u=m(u,l,v,h,K,4,o[40]),h=m(h,u,l,v,_,11,o[41]),v=m(v,h,u,l,z,16,o[42]),l=m(l,v,h,u,f,23,o[43]),u=m(u,l,v,h,S,4,o[44]),h=m(h,u,l,v,F,11,o[45]),v=m(v,h,u,l,J,16,o[46]),l=m(l,v,h,u,A,23,o[47]),u=T(u,l,v,h,_,6,o[48]),h=T(h,u,l,v,y,10,o[49]),v=T(v,h,u,l,V,15,o[50]),l=T(l,v,h,u,r,21,o[51]),u=T(u,l,v,h,F,6,o[52]),h=T(h,u,l,v,z,10,o[53]),v=T(v,h,u,l,P,15,o[54]),l=T(l,v,h,u,B,21,o[55]),u=T(u,l,v,h,d,6,o[56]),h=T(h,u,l,v,J,10,o[57]),v=T(v,h,u,l,f,15,o[58]),l=T(l,v,h,u,K,21,o[59]),u=T(u,l,v,h,M,6,o[60]),h=T(h,u,l,v,k,10,o[61]),v=T(v,h,u,l,A,15,o[62]),l=T(l,v,h,u,S,21,o[63]),s[0]=s[0]+u|0,s[1]=s[1]+l|0,s[2]=s[2]+v|0,s[3]=s[3]+h|0},_doFinalize:function(){var C=this._data,E=C.words,$=this._nDataBytes*8,n=C.sigBytes*8;E[n>>>5]|=128<<24-n%32;var e=a.floor($/4294967296),s=$;E[(n+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360,E[(n+64>>>9<<4)+14]=(s<<8|s>>>24)&16711935|(s<<24|s>>>8)&4278255360,C.sigBytes=(E.length+1)*4,this._process();for(var _=this._hash,B=_.words,A=0;A<4;A++){var z=B[A];B[A]=(z<<8|z>>>24)&16711935|(z<<24|z>>>8)&4278255360}return _},clone:function(){var C=O.clone.call(this);return C._hash=this._hash.clone(),C}});function R(C,E,$,n,e,s,_){var B=C+(E&$|~E&n)+e+_;return(B<<s|B>>>32-s)+E}function g(C,E,$,n,e,s,_){var B=C+(E&n|$&~n)+e+_;return(B<<s|B>>>32-s)+E}function m(C,E,$,n,e,s,_){var B=C+(E^$^n)+e+_;return(B<<s|B>>>32-s)+E}function T(C,E,$,n,e,s,_){var B=C+($^(E|~n))+e+_;return(B<<s|B>>>32-s)+E}p.MD5=O._createHelper(w),p.HmacMD5=O._createHmacHelper(w)}(Math),t.MD5})}(de)),de.exports}var le={exports:{}},ve={exports:{}},Oe;function ct(){return Oe||(Oe=1,function(i,c){(function(t,a){i.exports=a(L())})(j,function(t){return function(){var a=t,p=a.lib,x=p.WordArray,W=p.Hasher,O=a.algo,H=[],o=O.SHA1=W.extend({_doReset:function(){this._hash=new x.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(w,R){for(var g=this._hash.words,m=g[0],T=g[1],C=g[2],E=g[3],$=g[4],n=0;n<80;n++){if(n<16)H[n]=w[R+n]|0;else{var e=H[n-3]^H[n-8]^H[n-14]^H[n-16];H[n]=e<<1|e>>>31}var s=(m<<5|m>>>27)+$+H[n];n<20?s+=(T&C|~T&E)+1518500249:n<40?s+=(T^C^E)+1859775393:n<60?s+=(T&C|T&E|C&E)-1894007588:s+=(T^C^E)-899497514,$=E,E=C,C=T<<30|T>>>2,T=m,m=s}g[0]=g[0]+m|0,g[1]=g[1]+T|0,g[2]=g[2]+C|0,g[3]=g[3]+E|0,g[4]=g[4]+$|0},_doFinalize:function(){var w=this._data,R=w.words,g=this._nDataBytes*8,m=w.sigBytes*8;return R[m>>>5]|=128<<24-m%32,R[(m+64>>>9<<4)+14]=Math.floor(g/4294967296),R[(m+64>>>9<<4)+15]=g,w.sigBytes=R.length*4,this._process(),this._hash},clone:function(){var w=W.clone.call(this);return w._hash=this._hash.clone(),w}});a.SHA1=W._createHelper(o),a.HmacSHA1=W._createHmacHelper(o)}(),t.SHA1})}(ve)),ve.exports}var he={exports:{}},Se;function ft(){return Se||(Se=1,function(i,c){(function(t,a){i.exports=a(L())})(j,function(t){(function(){var a=t,p=a.lib,x=p.Base,W=a.enc,O=W.Utf8,H=a.algo;H.HMAC=x.extend({init:function(o,w){o=this._hasher=new o.init,typeof w=="string"&&(w=O.parse(w));var R=o.blockSize,g=R*4;w.sigBytes>g&&(w=o.finalize(w)),w.clamp();for(var m=this._oKey=w.clone(),T=this._iKey=w.clone(),C=m.words,E=T.words,$=0;$<R;$++)C[$]^=1549556828,E[$]^=909522486;m.sigBytes=T.sigBytes=g,this.reset()},reset:function(){var o=this._hasher;o.reset(),o.update(this._iKey)},update:function(o){return this._hasher.update(o),this},finalize:function(o){var w=this._hasher,R=w.finalize(o);w.reset();var g=w.finalize(this._oKey.clone().concat(R));return g}})})()})}(he)),he.exports}var He;function Pe(){return He||(He=1,function(i,c){(function(t,a,p){i.exports=a(L(),ct(),ft())})(j,function(t){return function(){var a=t,p=a.lib,x=p.Base,W=p.WordArray,O=a.algo,H=O.MD5,o=O.EvpKDF=x.extend({cfg:x.extend({keySize:128/32,hasher:H,iterations:1}),init:function(w){this.cfg=this.cfg.extend(w)},compute:function(w,R){for(var g,m=this.cfg,T=m.hasher.create(),C=W.create(),E=C.words,$=m.keySize,n=m.iterations;E.length<$;){g&&T.update(g),g=T.update(w).finalize(R),T.reset();for(var e=1;e<n;e++)g=T.finalize(g),T.reset();C.concat(g)}return C.sigBytes=$*4,C}});a.EvpKDF=function(w,R,g){return o.create(g).compute(w,R)}}(),t.EvpKDF})}(le)),le.exports}var pe={exports:{}},We;function _e(){return We||(We=1,function(i,c){(function(t,a,p){i.exports=a(L(),Pe())})(j,function(t){t.lib.Cipher||function(a){var p=t,x=p.lib,W=x.Base,O=x.WordArray,H=x.BufferedBlockAlgorithm,o=p.enc;o.Utf8;var w=o.Base64,R=p.algo,g=R.EvpKDF,m=x.Cipher=H.extend({cfg:W.extend(),createEncryptor:function(r,f){return this.create(this._ENC_XFORM_MODE,r,f)},createDecryptor:function(r,f){return this.create(this._DEC_XFORM_MODE,r,f)},init:function(r,f,y){this.cfg=this.cfg.extend(y),this._xformMode=r,this._key=f,this.reset()},reset:function(){H.reset.call(this),this._doReset()},process:function(r){return this._append(r),this._process()},finalize:function(r){r&&this._append(r);var f=this._doFinalize();return f},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function r(f){return typeof f=="string"?M:B}return function(f){return{encrypt:function(y,d,S){return r(d).encrypt(f,y,d,S)},decrypt:function(y,d,S){return r(d).decrypt(f,y,d,S)}}}}()});x.StreamCipher=m.extend({_doFinalize:function(){var r=this._process(!0);return r},blockSize:1});var T=p.mode={},C=x.BlockCipherMode=W.extend({createEncryptor:function(r,f){return this.Encryptor.create(r,f)},createDecryptor:function(r,f){return this.Decryptor.create(r,f)},init:function(r,f){this._cipher=r,this._iv=f}}),E=T.CBC=function(){var r=C.extend();r.Encryptor=r.extend({processBlock:function(y,d){var S=this._cipher,P=S.blockSize;f.call(this,y,d,P),S.encryptBlock(y,d),this._prevBlock=y.slice(d,d+P)}}),r.Decryptor=r.extend({processBlock:function(y,d){var S=this._cipher,P=S.blockSize,k=y.slice(d,d+P);S.decryptBlock(y,d),f.call(this,y,d,P),this._prevBlock=k}});function f(y,d,S){var P,k=this._iv;k?(P=k,this._iv=a):P=this._prevBlock;for(var F=0;F<S;F++)y[d+F]^=P[F]}return r}(),$=p.pad={},n=$.Pkcs7={pad:function(r,f){for(var y=f*4,d=y-r.sigBytes%y,S=d<<24|d<<16|d<<8|d,P=[],k=0;k<d;k+=4)P.push(S);var F=O.create(P,d);r.concat(F)},unpad:function(r){var f=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=f}};x.BlockCipher=m.extend({cfg:m.cfg.extend({mode:E,padding:n}),reset:function(){var r;m.reset.call(this);var f=this.cfg,y=f.iv,d=f.mode;this._xformMode==this._ENC_XFORM_MODE?r=d.createEncryptor:(r=d.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==r?this._mode.init(this,y&&y.words):(this._mode=r.call(d,this,y&&y.words),this._mode.__creator=r)},_doProcessBlock:function(r,f){this._mode.processBlock(r,f)},_doFinalize:function(){var r,f=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(f.pad(this._data,this.blockSize),r=this._process(!0)):(r=this._process(!0),f.unpad(r)),r},blockSize:128/32});var e=x.CipherParams=W.extend({init:function(r){this.mixIn(r)},toString:function(r){return(r||this.formatter).stringify(this)}}),s=p.format={},_=s.OpenSSL={stringify:function(r){var f,y=r.ciphertext,d=r.salt;return d?f=O.create([1398893684,1701076831]).concat(d).concat(y):f=y,f.toString(w)},parse:function(r){var f,y=w.parse(r),d=y.words;return d[0]==1398893684&&d[1]==1701076831&&(f=O.create(d.slice(2,4)),d.splice(0,4),y.sigBytes-=16),e.create({ciphertext:y,salt:f})}},B=x.SerializableCipher=W.extend({cfg:W.extend({format:_}),encrypt:function(r,f,y,d){d=this.cfg.extend(d);var S=r.createEncryptor(y,d),P=S.finalize(f),k=S.cfg;return e.create({ciphertext:P,key:y,iv:k.iv,algorithm:r,mode:k.mode,padding:k.padding,blockSize:r.blockSize,formatter:d.format})},decrypt:function(r,f,y,d){d=this.cfg.extend(d),f=this._parse(f,d.format);var S=r.createDecryptor(y,d).finalize(f.ciphertext);return S},_parse:function(r,f){return typeof r=="string"?f.parse(r,this):r}}),A=p.kdf={},z=A.OpenSSL={execute:function(r,f,y,d,S){if(d||(d=O.random(64/8)),S)var P=g.create({keySize:f+y,hasher:S}).compute(r,d);else var P=g.create({keySize:f+y}).compute(r,d);var k=O.create(P.words.slice(f),y*4);return P.sigBytes=f*4,e.create({key:P,iv:k,salt:d})}},M=x.PasswordBasedCipher=B.extend({cfg:B.cfg.extend({kdf:z}),encrypt:function(r,f,y,d){d=this.cfg.extend(d);var S=d.kdf.execute(y,r.keySize,r.ivSize,d.salt,d.hasher);d.iv=S.iv;var P=B.encrypt.call(this,r,f,S.key,d);return P.mixIn(S),P},decrypt:function(r,f,y,d){d=this.cfg.extend(d),f=this._parse(f,d.format);var S=d.kdf.execute(y,r.keySize,r.ivSize,f.salt,d.hasher);d.iv=S.iv;var P=B.decrypt.call(this,r,f,S.key,d);return P}})}()})}(pe)),pe.exports}(function(i,c){(function(t,a,p){i.exports=a(L(),ot(),st(),Pe(),_e())})(j,function(t){return function(){var a=t,p=a.lib,x=p.BlockCipher,W=a.algo,O=[],H=[],o=[],w=[],R=[],g=[],m=[],T=[],C=[],E=[];(function(){for(var e=[],s=0;s<256;s++)s<128?e[s]=s<<1:e[s]=s<<1^283;for(var _=0,B=0,s=0;s<256;s++){var A=B^B<<1^B<<2^B<<3^B<<4;A=A>>>8^A&255^99,O[_]=A,H[A]=_;var z=e[_],M=e[z],r=e[M],f=e[A]*257^A*16843008;o[_]=f<<24|f>>>8,w[_]=f<<16|f>>>16,R[_]=f<<8|f>>>24,g[_]=f;var f=r*16843009^M*65537^z*257^_*16843008;m[A]=f<<24|f>>>8,T[A]=f<<16|f>>>16,C[A]=f<<8|f>>>24,E[A]=f,_?(_=z^e[e[e[r^z]]],B^=e[e[B]]):_=B=1}})();var $=[0,1,2,4,8,16,32,64,128,27,54],n=W.AES=x.extend({_doReset:function(){var e;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var s=this._keyPriorReset=this._key,_=s.words,B=s.sigBytes/4,A=this._nRounds=B+6,z=(A+1)*4,M=this._keySchedule=[],r=0;r<z;r++)r<B?M[r]=_[r]:(e=M[r-1],r%B?B>6&&r%B==4&&(e=O[e>>>24]<<24|O[e>>>16&255]<<16|O[e>>>8&255]<<8|O[e&255]):(e=e<<8|e>>>24,e=O[e>>>24]<<24|O[e>>>16&255]<<16|O[e>>>8&255]<<8|O[e&255],e^=$[r/B|0]<<24),M[r]=M[r-B]^e);for(var f=this._invKeySchedule=[],y=0;y<z;y++){var r=z-y;if(y%4)var e=M[r];else var e=M[r-4];y<4||r<=4?f[y]=e:f[y]=m[O[e>>>24]]^T[O[e>>>16&255]]^C[O[e>>>8&255]]^E[O[e&255]]}}},encryptBlock:function(e,s){this._doCryptBlock(e,s,this._keySchedule,o,w,R,g,O)},decryptBlock:function(e,s){var _=e[s+1];e[s+1]=e[s+3],e[s+3]=_,this._doCryptBlock(e,s,this._invKeySchedule,m,T,C,E,H);var _=e[s+1];e[s+1]=e[s+3],e[s+3]=_},_doCryptBlock:function(e,s,_,B,A,z,M,r){for(var f=this._nRounds,y=e[s]^_[0],d=e[s+1]^_[1],S=e[s+2]^_[2],P=e[s+3]^_[3],k=4,F=1;F<f;F++){var K=B[y>>>24]^A[d>>>16&255]^z[S>>>8&255]^M[P&255]^_[k++],V=B[d>>>24]^A[S>>>16&255]^z[P>>>8&255]^M[y&255]^_[k++],J=B[S>>>24]^A[P>>>16&255]^z[y>>>8&255]^M[d&255]^_[k++],u=B[P>>>24]^A[y>>>16&255]^z[d>>>8&255]^M[S&255]^_[k++];y=K,d=V,S=J,P=u}var K=(r[y>>>24]<<24|r[d>>>16&255]<<16|r[S>>>8&255]<<8|r[P&255])^_[k++],V=(r[d>>>24]<<24|r[S>>>16&255]<<16|r[P>>>8&255]<<8|r[y&255])^_[k++],J=(r[S>>>24]<<24|r[P>>>16&255]<<16|r[y>>>8&255]<<8|r[d&255])^_[k++],u=(r[P>>>24]<<24|r[y>>>16&255]<<16|r[d>>>8&255]<<8|r[S&255])^_[k++];e[s]=K,e[s+1]=V,e[s+2]=J,e[s+3]=u},keySize:256/32});a.AES=x._createHelper(n)}(),t.AES})})(we);var ut=we.exports;const $e=ee(ut);var Me={exports:{}};(function(i,c){(function(t,a){i.exports=a(L())})(j,function(t){return t.enc.Utf8})})(Me);var dt=Me.exports;const te=ee(dt);var ze={exports:{}};(function(i,c){(function(t,a,p){i.exports=a(L(),_e())})(j,function(t){return t.mode.ECB=function(){var a=t.lib.BlockCipherMode.extend();return a.Encryptor=a.extend({processBlock:function(p,x){this._cipher.encryptBlock(p,x)}}),a.Decryptor=a.extend({processBlock:function(p,x){this._cipher.decryptBlock(p,x)}}),a}(),t.mode.ECB})})(ze);var lt=ze.exports;const ke=ee(lt);var De={exports:{}};(function(i,c){(function(t,a,p){i.exports=a(L(),_e())})(j,function(t){return t.pad.Pkcs7})})(De);var vt=De.exports;const Ne=ee(vt),Ie="LEA8PAbmSnbfz5yc",ht=I.ua.indexOf("H5HttpEncrypt/false")===-1&&I.env!=="local"&&I.env!=="test3"&&I.env!=="test"&&I.env!=="dev"&&!I.isJSBEncryptOff;let pt=1e3;class U{static encrypt(c,t=Ie){return $e.encrypt(te.parse(c),te.parse(t),{mode:ke,padding:Ne}).toString()}static decrypt(c,t=Ie){return $e.decrypt(c,te.parse(t),{mode:ke,padding:Ne}).toString(te)}static debug(c,...t){if(!I.maybeInApp&&I.env!=="local")return;const a=t.map(p=>typeof p=="object"?JSON.stringify(p):p).join(" ");console.log(c,ht?U.encrypt(a):a)}constructor(c){this.logTag=c,this.pid=++pt}start(c,...t){U.debug(`${this.logTag?`[${this.logTag}]`:""}[${this.pid}]${c?`[${c}]`:""}[START]`,...t)}debug(c,...t){U.debug(`${this.logTag?`[${this.logTag}]`:""}[${this.pid}]${c?`[${c}]`:""}`,...t)}end(c,...t){U.debug(`${this.logTag?`[${this.logTag}]`:""}[${this.pid}]${c?`[${c}]`:""}[END]`,...t)}}const _t={};function gt(){return typeof window<"u"?window:Object.assign({},_t)}const N=gt(),{HeytapNativeApi:ge,prompt:X}=N,je="webBridge:",Fe="rainbow:",qe="HT_SUCCESS",ye="HT_FAILURE",Z="HT_UNSUPPORT_METHOD",yt="HT_UNSUPPORT_WEBEXT",xt="HT_PARSE_PARAM_ERROR",mt="HT_ERROR_METHOD",Ct="HT_NOT_SUPPORT_DEVICE",Ue="HT_JSB_TIMEOUT",b={callId:Math.ceil(Math.random()*1e5),calls:{},clientCallMap:{},timer:{},callWebExt(i,c,t,a){const p=b.callId++,x=typeof c=="object"?JSON.stringify(c):c||"";t&&(b.calls[p]=t),I.supportWebExt.v==="0.9"&&ge&&ge.invoke?!ge.invoke(i,x,p)&&t&&(delete b.calls[p],t(b.output(!1,Z))):(X==null||X(`${je}${JSON.stringify({method:i,arguments:x,callbackId:p})}`,je),a!=null&&a.timeout&&(b.timer[p]=N.setTimeout(()=>{delete b.timer[p],delete b.calls[p],t==null||t(b.output(!1,Ue))},a==null?void 0:a.timeout)))},callInterface(i,c,t,a,p){var x;p.logger.debug(`INTERFACE.${i}.${c}.CALL`,t);const W=(x=N[i])===null||x===void 0?void 0:x[c];if(W)try{const O=JSON.stringify(t)==="{}"?W():Array.isArray(t)?W(...t):W(typeof t=="string"?t:JSON.stringify(t));a&&a(b.output(!0,qe,O))}catch{a&&a(b.output(!1,ye))}else a&&a(b.output(!1,Z))},_removeIframe(i){const c=document.getElementById(`iframe_${i}`);c&&c.parentNode&&c.parentNode.removeChild(c)},_callRainbow(i,c,t,a){const p=X&&X(i,Fe)==="";if(a&&a.logger.debug(`RAINBOW.PROMPT.${p}`,i),!p&&I.isAndroid)return delete b.calls[c],t(b.output(!1,Z));a.timeout&&(b.timer[c]=N.setTimeout(()=>{delete b.timer[c],delete b.calls[c],b._removeIframe(c),t(b.output(!1,Ue))},a.timeout))},callRainbow(i,c,t,a){const p=b.callId++;c=typeof c=="object"?JSON.stringify(c):c||"",t&&(b.calls[p]=t);const[x,W]=i.split("."),O=`${Fe}//${x}:${p}/${W}?${c}`;a.logger.debug(`RAINBOW.${i}.ENTER`,O),b.callInterface("android","callCommonMethod",O,H=>{if(a.logger.debug(`RAINBOW.${i}.INTERFACE`,H),!H.success)return H.message===ye?t(b.output(!1,Z)):b._callRainbow(O,p,t,a)},a)},_downgradeCallRainbow(i,c,t){i.jsbMethod&&b.callRainbow(i.jsbMethod,i.transformRequest?i.transformRequest(c,"jsb"):c,a=>{a.success&&i.transformResponse&&(a.data=i.transformResponse(a.data,"jsb")),t(a)},i)},_downgradeCallInterface(i,c,t){if(i.jsMethod){const[a,p]=i.jsMethod.split(".");b.callInterface(a,p,i.transformRequest?i.transformRequest(c,"js"):c,x=>{x.success&&i.transformResponse&&(x.data=i.transformResponse(x.data,"js")),t(x)},i)}},_downgradeCall(i,c,t){const a=!!(N.android&&N.android.callCommonMethod);i.logger.debug(`DOWNGRADE.ENTER.CREDIT_${!!a}`),a?i.jsbMethod?b._downgradeCallRainbow(i,c,p=>{!p.success&&i.jsMethod?b._downgradeCallInterface(i,c,t):t(p)}):b._downgradeCallInterface(i,c,t):i.jsMethod?b._downgradeCallInterface(i,c,p=>{!p.success&&i.jsbMethod?b._downgradeCallRainbow(i,c,t):t(p)}):b._downgradeCallRainbow(i,c,t)},onComplete(i,c){if(!b.calls[i])return;U.debug(`JSB.COMPLETE.${i}`,c),b.timer[i]&&(N.clearTimeout(b.timer[i]),delete b.timer[i]);let t=c||{};if(c&&typeof c=="string")try{t=JSON.parse(c)}catch{t={code:-1,message:xt}}const a=!!(t.code===0||t.status&&t.status.code===0);b.calls[i](b.output(a,a?qe:t.code===1?Z:t.message||t.status&&t.status.msg||t.msg||ye,t.data)),delete b.calls[i],b._removeIframe(i)},output(i,c,t){return{success:i,message:c,data:t}},_clientCallHandler(i,c={}){if(U.debug(`WEBEXT.TRIGGER.ACTION.${i}`,c),!i||!b.clientCallMap[i])return;const t=b.clientCallMap[i];for(let a=t.length-1;a>=0;a--){const{fn:p,once:x}=t[a];p(c),x&&t.splice(a,1)}},registeAction(i,c,t){if(U.debug(`WEBEXT.REGISTER.ACTION.${i}${t?".ONCE":""}`),!i||!c)return;b.clientCallMap[i]?b.clientCallMap[i].push({fn:c,once:t}):b.clientCallMap[i]=[{fn:c,once:t}]}};I.isMobile&&(I.supportWebExt&&(N.HeytapJsApi=N.HeytapJsApi||{},N.HeytapJsApi.invoke=function({module:i,name:c,data:t={}}){return U.debug(`WEBEXT.INVOKE.${i}.${c}.CALL`,t),new Promise(a=>{b.callWebExt(`${i}.${c}`,t,p=>{U.debug(`WEBEXT.INVOKE.${i}.${c}.RES`,p),a({code:p.success?0:-1,data:p.data})})})},N.HeytapJsApi.callback=b.onComplete,N.HeytapJsApi.regist=b.registeAction,N.heytapCall=b._clientCallHandler),N.RainbowBridge=N.RainbowBridge||{},N.RainbowBridge.onComplete=b.onComplete);const Le={invoke(i,c={},t={}){return new Promise(a=>{const p=t.logger=t.logger||new U("JSB");p.start(i,c,Object.assign(Object.assign({},t),{logger:void 0}));const x=W=>{p.end(i,W),a(W)};if(typeof i!="string"||i.split(".").length!==2)return x(b.output(!1,mt));if(I.maybeInApp){const[W,O]=i.split("."),H=W.indexOf("JS")!==-1;["android","duiba_app"].indexOf(W)!==-1?b.callInterface(W,O,c,x,t):H?b.callRainbow(i,c,x,t):I.supportWebExt?(t.logger.debug(`WEBEXT.${i}.ENTER`),b.callWebExt(i,c,w=>{t.logger.debug(`WEBEXT.${i}.RES`,w),!w.success&&(t.jsbMethod||t.jsMethod)&&w.message===Z?b._downgradeCall(t,c,x):x(w)},t)):t.jsbMethod||t.jsMethod?b._downgradeCall(t,c,x):x(b.output(!1,yt))}else x(b.output(!1,Ct))})},registeAction:b.registeAction};return window.heytap=Le,Le});
